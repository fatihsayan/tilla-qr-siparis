<!DOCTYPE html>
<html>
<head>
    <title>Sipariş Paneli</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .siparis { border: 1px solid #ddd; padding: 10px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>Siparişler</h1>
    <button onclick="getir()">Yenile</button>
    <div id="siparisler"></div>

    <script>
        function getir() {
            fetch('/siparisler')
                .then(res => res.json())
                .then(data => {
                    let html = '';
                    data.reverse().forEach(s => {
                        html += '<div class="siparis">' + 
                            'Masa: ' + (s.masa || '?') + '<br>' +
                            'Tarih: ' + (s.tarih || '') + '<br>';
                        if (s.urunler) {
                            s.urunler.forEach(u => {
                                html += u.urun + ' x ' + (u.adet || 1) + ' - ' + 
                                        (u.fiyat * (u.adet || 1)) + ' TL<br>';
                            });
                        }
                        html += '</div>';
                    });
                    document.getElementById('siparisler').innerHTML = html;
                });
        }
        getir();
        setInterval(getir, 3000);
    </script>
</body>
</html>