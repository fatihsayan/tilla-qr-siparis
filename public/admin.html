<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Tilla Pastanesi - SipariÅŸler</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f5f5f5; }
        .siparis { background: white; margin: 10px 0; padding: 15px; border-radius: 5px; border-left: 5px solid #d2691e; }
        .masa { background: #d2691e; color: white; padding: 5px 10px; border-radius: 5px; display: inline-block; }
        .urun { border-bottom: 1px solid #eee; padding: 5px 0; }
        .toplam { font-weight: bold; color: #d2691e; margin-top: 10px; }
        button { background: #d2691e; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>ðŸ“‹ Tilla Pastanesi - SipariÅŸler</h1>
    <button onclick="yenile()">ðŸ”„ Yenile</button>
    <div id="siparisler"></div>

    <script>
        function yenile() {
            fetch('/admin/siparisler')
                .then(res => res.json())
                .then(data => {
                    let html = '';
                    data.forEach(s => {
                        let masa = s.masa || 'BelirtilmemiÅŸ';
                        let tarih = s.tarih ? new Date(s.tarih).toLocaleString('tr-TR') : '';
                        let urunler = '';
                        let toplam = 0;
                        
                        s.urunler.forEach(u => {
                            urunler += `<div class="urun">${u.urun || u.isim || 'ÃœrÃ¼n'} x 1 - ${u.fiyat || u.price || 0} TL</div>`;
                            toplam += (u.fiyat || u.price || 0);
                        });
                        
                        html += `
                            <div class="siparis">
                                <div><span class="masa">Masa ${masa}</span> <span style="float:right">${tarih}</span></div>
                                ${urunler}
                                <div class="toplam">Toplam: ${toplam} TL</div>
                            </div>
                        `;
                    });
                    document.getElementById('siparisler').innerHTML = html;
                });
        }
        yenile();
        setInterval(yenile, 5000);
    </script>
</body>
</html>